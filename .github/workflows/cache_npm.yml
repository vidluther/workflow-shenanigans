name: "Cache NPM"

on:
  workflow_dispatch:
  push:

jobs:
  install_and_cache:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: "18.13.0"
          cache: npm
      - if: ${{ steps.cache-npm.outputs.cache-hit != 'true' }}
        name: List the state of node modules
        continue-on-error: true
        run: npm list
      - name: Install npm packages
        run: npm install
      - name: Get Date and Time to Set Version #
        id: date
        run: echo "::set-output name=date::$(date +'%Y-%m-%d %H:%M:%S %Z')"
      - name: Echo Date
        run: echo ${{ steps.date.outputs.date }}